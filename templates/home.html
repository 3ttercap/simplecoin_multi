{% extends "base.html" %}
{% block body %}

<script>
$(document).ready(function() {
  generate_graph("/pool/stats", ".pool-stats");

  //  Action stats form based on input val
    $('#statsform').submit(function(){
      var address = $('#inputAddress').val();
      $(this).attr('action', "/" + address);
    });

});
</script>

<div class="container">
    <div class="row page-header">

  <!-- Alerts
  ================================================== -->

    {% if alerts  %}
      {% for alert in alerts %}
      <div class="alert alert-dismissable alert-{{ alert['severity'] }}">
        <button type="button" class="close" data-dismiss="alert">Ã—</button>
        <h4>{{ alert['title'] }} - <span class="text-muted small" style="color:#fff;">{{ alert['date'] }}</span></h4>
        <p>{{ alert['body'] }}</p>
      </div>
      {% endfor %}
    {% endif %}

  <!-- Img
  ================================================== -->


      <div class="col-lg-5">
        <div class="text-center">
          <img src="static/img/doge-miner.jpg" width="450">
        </div>
      </div>

  <!-- Quick started
  ================================================== -->

      <div class="col-lg-7">
        <div class="well well-lg">
          <h3>Quick start for mining:</h3>
          <p><b>URL: </b>stratum+tcp://stratum.simpledoge.com</p>
          <p><b>Port:</b> 3333</p>
          <p><b>Username: </b>Your doge address</p>
          <p><b>Password: </b>anything</p>
          <p>cgminer -o stratum+tcp://stratum.simpledoge.com:3333 -u YourDogeAddress -p x -I 13 </p>
        </div>
      </div>

    </div>

  <!-- News/Announcements
  ================================================== -->

  <div class="row row-header">
    <div class="col-lg-8">

      {% for new in news %}
      <div class="panel panel-default">
        <div class="panel-heading">{{ new['title']|safe }} <span class="text-muted pull-right">{{ new['date']|safe }}</span></div>
        <div class="panel-body">
          <p>{{ new['body']|safe }}</p>
        </div>
      </div>
      {% endfor %}

    </div>


  <!-- New users
  ================================================== -->

    <div class="col-lg-4">

      <div class="panel panel-default">
        <div class="panel-heading">New to Cryptocurrency?</div>
        <div class="panel-body">
          Check out a detailed step-by-step guide on <a href="http://www.reddit.com/r/dogemining/wiki/index/mining_guide" target="_blank">Reddit</a>.
        </div>
      </div>

  <!-- About
  ================================================== -->

      <div class="panel panel-default">
        <div class="panel-heading">About Simple Doge</div>
        <div class="panel-body">
          <p>No registration required!</p>
          <p>1% Fees</p>
          <p>Custom python pool server. Much new. Very speed.</p>
        </div>
      </div>

    </div>
  </div>

  <!-- User stats
  ================================================== -->
  <div class="row row-header" style="padding-top:50px;">
      <div class="col-lg-12">
        <div class="col-lg-8 col-lg-offset-2">
          <div class="well">
            <form class="bs-example form-horizontal" id="statsform">
              <fieldset>
                <legend>Personal stats available at http://simpledoge.com/YourDogeAddress</legend>
                <div class="form-group">
                  <label for="inputAddress" class="col-lg-2 control-label">Address</label>
                  <div class="col-lg-8">
                    <input type="text" class="form-control" id="inputAddress" placeholder="Doge Address">
                    <span class="help-block">Paste your Doge address for quick access to individualized stats</span>
                  </div>
                  <button type="submit" class="btn btn-default">Go</button>
                </div>
              </fieldset>
            </form>
          </div>
        </div>
      </div>
  </div>


  <!-- Pool stats
  ================================================== -->
  <div class="row row-header">
      <div class="col-lg-10 col-lg-offset-1">
        <div class="pool-stats">
          <h2>Pool Hashrate</h2>
        </div>
      </div>
  </div>
  <div class="row row-header" style="padding-top:50px;">
      <div class="col-lg-12">
        <div class="bs-example table-responsive">
          <table class="table table-striped table-hover ">
            <thead>
              <tr>
                <th>Age</th>
                <th>Shares</th>
                <th>Round Duration</th>
                <th>Payout</th>
                <th>Difficulty</th>
                <th>Solved by</th>
                <th>Block Hash</th>
                <th>Blockheight</th>
                <th>Status</th>
              </tr>
            </thead>
            <tbody>
              <tr class="active">
                <th>Current</th>
                <th><span class="odometer blockshares">0</span></th>
                <th><span class="hours">00</span>:<span class="minutes">00</span>:<span class="seconds">00</span></th>
                <th>{{ (current_block.data['reward'] / 100000000) | round(2) }}</th>
                <th>{{ current_block.data['difficulty'] }}</th>
                <th>...</th>
                <th>...</th>
                <th>{{ current_block.data['height'] }}</th>
                <th>In progress</th>
              </tr>
              {% for block in blocks %}
              <tr>
                <th>{{ block.found_at | time_ago }}</th>
                <th>{{ block.shares_to_solve }}</th>
                <th>{{ block.duration }}</th>
                <th>{{ (block.total_value / 100000000) | round(2) }}</th>
                <th>{{ block.difficulty| round(4) }}</th>
                <th><a href="/{{ block.user }}">{{ block.user|truncate(9, True) }}</a></th>
                <th><a href="https://dogechain.info/block/{{ block.hash }}">{{ block.hash|truncate(9, True) }}</a></th>
                <th>{{ block.height }}</th>
                <th>{% if block.mature %}Confirmed{% else %}Unconfirmed{% endif %}</th>
              </tr>
              {% endfor %}

            </tbody>
          </table>
        </div>
      </div>
  </div>
</div>
{% endblock %}
