{% extends "base.html" %}
{% set active_page = "pool_stats" %}
{% block body %}
<script>
$(document).ready(function() {

  {# Initial graph generation #}
  generate_graph('hour', '%H:%M %p', 'pool');


});
</script>

  <div class="row row-header">
    <div class="col-lg-12">
      <h2>Pool Hashrate</h2>
        <ul class="nav nav-tabs">
          <li class="active tab"><a id="hour" data-target="hour" data-format="%M:%S">Hour</a></li>
          <li class="tab"><a id="day" data-target="day" data-format="%H:%M %p">Day</a></li>
          <li class="tab"><a id="month" data-target="month" data-format="%m/%d %H:%M">Month</a></li>
        </ul>
      <div id="chart" style="height:400px;">
        <img src="/static/img/712.GIF" style="position:absolute;padding-top:150px;padding-left:400px;"><svg></svg>
      </div>
    </div>
  </div>

<div class="row row-header" style="padding-top:50px;">
  <div class="col-lg-12">
    <div class="bs-example table-responsive">
      <table class="table table-striped table-hover ">
        <thead>
          <tr>
            <th>Age</th>
            <th>Shares</th>
            <th>Luck</th>
            <th>Round Duration</th>
            <th>Payout</th>
            <th>Difficulty</th>
            <th>Solved by</th>
            <th>Block Hash</th>
            <th>Blockheight</th>
            <th>Status</th>
          </tr>
        </thead>
        <tbody>
        <tr class="active">
          <th>Current</th>
          <th><span class="odometer blockshares">0</span></th>
          <th><span class="odometer blockluck">0</span>%</th>
          <th><span class="hours">00</span>:<span class="minutes">00</span>:<span class="seconds">00</span></th>
          <th>{{ (current_block.data['reward'] / 100000000) | round(2) }}</th>
          <th>{{ current_block.data['difficulty'] }}</th>
          <th>...</th>
          <th>...</th>
          <th>{{ current_block.data['height'] }}</th>
          <th>In progress</th>
        </tr>
        {% for block in blocks %}
        <tr>
          <th>{{ block.found_at | time_ago }}</th>
          <th>{{ block.shares_to_solve }}</th>
          <th>{{ ( ((block.difficulty * (2 ** 16))/block.shares_to_solve ) * 100) | round(1) }} %</th>
          <th>{{ block.duration }}</th>
          <th>{{ (block.total_value / 100000000) | round(2) }}</th>
          <th>{{ block.difficulty| round(4) }}</th>
          <th><a href="/{{ block.user }}">{{ block.user|truncate(9, True) }}</a></th>
          <th><a href="https://dogechain.info/block/{{ block.hash }}">{{ block.hash|truncate(9, True) }}</a></th>
          <th>{{ block.height }}</th>
          <th>{{ block.status }}</th>
        </tr>
        {% endfor %}

        </tbody>
      </table>
    </div>
  </div>
</div>
{% endblock %}
