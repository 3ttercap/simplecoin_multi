{% extends "base.html" %}
{% set active_page = "pool_stats" %}
{% set page_title = "Pool Stats - Efficiency and block information for Simple Doge mining pool" %}
{% block body %}
<script>
$(document).ready(function() {

  {# Initial graph generation #}
  generate_graph('hour', '%H:%M %p', 'pool');


});
</script>

<div class="row page-header">
  <h2 style="word-wrap:break-word;">Pool Stats</h2>
  <br>
  <div class="col-sm-4">
    <div class="panel panel-default">
      <div class="panel-body text-center">
        <small>Active&nbsp;Workers</small>&nbsp;
        <i class="fa fa-question-circle" data-toggle="tooltip" data-placement="right"
                     title="Total workers currently mining the Simple Doge mining pool. Updated every couple minutes."></i>
        <br>
        <h4>
          <p><span>{{ g.worker_count }}</span></p>
        </h4>
      </div>
    </div>
  </div>
  <div class="col-sm-4">
    <div class="panel panel-default">
      <div class="panel-body text-center">
        <small>Average&nbsp;Hashrate</small>&nbsp;
        <i class="fa fa-question-circle" data-toggle="tooltip" data-placement="right"
                     title="Megahashes per second completed by the pool, an average of the last 10 minutes."></i>
        <br>
        <h4>
          <p><span class="odometer phashrate">...</span>&nbsp;MHashes/sec</p>
        </h4>
      </div>
    </div>
  </div>
  <div class="col-sm-4">
    <div class="panel panel-default">
      <div class="panel-body text-center">
        <small>Pool Efficiency</small>&nbsp;
        <i class="fa fa-question-circle" data-toggle="tooltip" data-placement="right"
                     title="All time efficiency for shares at least 25 hours old. Accepted / Total = {{ accept_total }} / ({{ reject_total }} + {{ accept_total }}). Updated hourly."></i>
        <br>
        <h4>
          <p><span>{{ efficiency | round(2) }}%</span></p>
        </h4>
      </div>
    </div>
  </div>
</div>

<div class="row row-header">
  <div class="col-lg-12">
    <h2>Pool Hashrate</h2>
      <ul class="nav nav-tabs">
        <li class="active tab"><a id="hour" data-target="hour" data-format="%M:%S">Hour</a></li>
        <li class="tab"><a id="day" data-target="day" data-format="%H:%M %p">Day</a></li>
        <li class="tab"><a id="month" data-target="month" data-format="%m/%d %H:%M">Month</a></li>
      </ul>
    <div id="chart" style="height:400px;">
      <img src="/static/img/712.GIF" style="position:absolute;padding-top:150px;padding-left:400px;"><svg></svg>
    </div>
  </div>
</div>

<div class="row row-header" style="padding-top:50px;">
  <div class="col-lg-12">
    <div class="bs-example table-responsive">
      <table class="table table-striped table-hover ">
        <thead>
          <tr>
            <th>Age</th>
            <th>Shares</th>
            <th>Luck</th>
            <th>Round Duration</th>
            <th>Payout</th>
            <th>Difficulty</th>
            <th>Solved by</th>
            <th>Block Hash</th>
            <th>Blockheight</th>
            <th>Status</th>
          </tr>
        </thead>
        <tbody>
        <tr class="active">
          <th>Current</th>
          <th><span class="odometer blockshares">0</span></th>
          <th><span class="odometer blockluck">0</span>%</th>
          <th><span class="hours">00</span>:<span class="minutes">00</span>:<span class="seconds">00</span></th>
          <th>{{ '{:,}'.format((current_block.data['reward'] / 100000000) | round(2)) }}</th>
          <th>{{ '{:,}'.format((current_block.data['difficulty'] | int)) }}</th>
          <th>...</th>
          <th>...</th>
          <th>{{ '{:,}'.format((current_block.data['height']) | int) }}</th>
          <th>In progress</th>
        </tr>
        {% for block in blocks %}
        <tr>
          <th>{{ block.found_at | time_ago }}</th>
          <th>{{ '{:,}'.format(block.shares_to_solve) }}</th>
          <th>{{ '{:,}'.format(( ((block.difficulty * (2 ** 16))/block.shares_to_solve ) * 100) | round(1)) }} %</th>
          <th>{{ block.duration }}</th>
          <th>{{ '{:,}'.format((block.total_value / 100000000) | round(2)) }}</th>
          <th>{{ '{:,}'.format(block.difficulty | round(4)) }}</th>
          <th><a href="/{{ block.user }}">{{ block.user | truncate(9, True) }}</a></th>
          <th><a href="{{ config['block_link_prefix'] }}{{ block.hash }}">
              {{ block.hash | truncate(9, True) }}
          </a></th>
          <th>{{ '{:,}'.format(block.height) }}</th>
          <th>{{ block.status }}</th>
        </tr>
        {% endfor %}
        </tbody>
      </table>
    </div>
  </div>
</div>
{% endblock %}
